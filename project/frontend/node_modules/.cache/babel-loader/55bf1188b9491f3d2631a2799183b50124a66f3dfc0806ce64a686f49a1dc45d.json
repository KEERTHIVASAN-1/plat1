{"ast":null,"code":"var _jsxFileName = \"D:\\\\plat1\\\\project\\\\frontend\\\\src\\\\contexts\\\\ContestContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/contexts/ContestContext.js\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { languageOptions } from '../mock';\nimport { api } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ContestContext = /*#__PURE__*/createContext();\nexport const useContest = () => {\n  _s();\n  const ctx = useContext(ContestContext);\n  if (!ctx) throw new Error('useContest must be used within ContestProvider');\n  return ctx;\n};\n_s(useContest, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nexport const ContestProvider = ({\n  children\n}) => {\n  _s2();\n  const [roundInfo, setRoundInfo] = useState({});\n  const [participants, setParticipants] = useState([]);\n  const [submissions, setSubmissions] = useState([]);\n  const getRoundInfo = roundId => roundInfo[roundId];\n  const updateRoundStatus = (roundId, status) => {\n    setRoundInfo(prev => ({\n      ...prev,\n      [roundId]: {\n        ...prev[roundId],\n        status\n      }\n    }));\n  };\n  const startRound = roundId => {\n    setRoundInfo(prev => ({\n      ...prev,\n      [roundId]: {\n        ...prev[roundId],\n        status: 'active',\n        startTime: new Date().toISOString(),\n        isLocked: false\n      }\n    }));\n  };\n  const lockRound = roundId => setRoundInfo(prev => ({\n    ...prev,\n    [roundId]: {\n      ...prev[roundId],\n      isLocked: true\n    }\n  }));\n  const unlockRound = roundId => setRoundInfo(prev => ({\n    ...prev,\n    [roundId]: {\n      ...prev[roundId],\n      isLocked: false\n    }\n  }));\n  const submitCode = async (userId, problemId, code, language, round) => {\n    try {\n      const payload = {\n        userId,\n        problemId,\n        code,\n        language,\n        round\n      };\n      const {\n        data\n      } = await api.submitCode(payload);\n      // update submissions\n      try {\n        const {\n          data: subs\n        } = await api.getUserSubmissions(userId);\n        setSubmissions(subs || []);\n      } catch (_) {}\n      return {\n        success: true,\n        submissionId: (data === null || data === void 0 ? void 0 : data.submissionId) || null\n      };\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('submitCode error', err);\n      return {\n        success: false,\n        message: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.message || 'Submission error'\n      };\n    }\n  };\n  const runCode = async (code, language, customInput) => {\n    try {\n      const {\n        data\n      } = await api.runCode({\n        code,\n        language,\n        customInput\n      });\n      const run = (data === null || data === void 0 ? void 0 : data.run) || {};\n      return {\n        success: true,\n        output: run.output || run.stdout || (data === null || data === void 0 ? void 0 : data.output) || '',\n        executionTime: run.cpu_time || (data === null || data === void 0 ? void 0 : data.executionTime) || null\n      };\n    } catch (err) {\n      console.error('runCode error', err);\n      throw err;\n    }\n  };\n  useEffect(() => {\n    async function bootstrap() {\n      const rounds = ['round1', 'round2'];\n      const next = {};\n      for (const id of rounds) {\n        try {\n          const {\n            data\n          } = await api.getRoundWindow(id);\n          next[id] = {\n            ...(data || {}),\n            id,\n            name: id === 'round1' ? 'Round 1' : 'Round 2'\n          };\n        } catch (err) {\n          next[id] = {\n            id,\n            name: id === 'round1' ? 'Round 1' : 'Round 2',\n            status: 'upcoming',\n            isLocked: true\n          };\n        }\n      }\n\n      // load problems and attach to both rounds (backend may have round-specific queries later)\n      try {\n        const {\n          data\n        } = await api.getProblems();\n        const list = (data === null || data === void 0 ? void 0 : data.problems) || data || [];\n        next.round1 = {\n          ...(next.round1 || {}),\n          problems: list\n        };\n        next.round2 = {\n          ...(next.round2 || {}),\n          problems: list\n        };\n      } catch (err) {\n        console.warn('Failed to load problems during bootstrap', err);\n      }\n      setRoundInfo(next);\n    }\n    bootstrap();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ContestContext.Provider, {\n    value: {\n      roundInfo,\n      participants,\n      submissions,\n      getRoundInfo,\n      updateRoundStatus,\n      startRound,\n      lockRound,\n      unlockRound,\n      submitCode,\n      runCode,\n      toggleEligibility: () => {}\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s2(ContestProvider, \"B/LUpkrZ05RpAVXzdvKLmrPmCwk=\");\n_c = ContestProvider;\nvar _c;\n$RefreshReg$(_c, \"ContestProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","languageOptions","api","jsxDEV","_jsxDEV","ContestContext","useContest","_s","ctx","Error","ContestProvider","children","_s2","roundInfo","setRoundInfo","participants","setParticipants","submissions","setSubmissions","getRoundInfo","roundId","updateRoundStatus","status","prev","startRound","startTime","Date","toISOString","isLocked","lockRound","unlockRound","submitCode","userId","problemId","code","language","round","payload","data","subs","getUserSubmissions","_","success","submissionId","err","_err$response","_err$response$data","console","error","message","response","detail","runCode","customInput","run","output","stdout","executionTime","cpu_time","bootstrap","rounds","next","id","getRoundWindow","name","getProblems","list","problems","round1","round2","warn","Provider","value","toggleEligibility","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/plat1/project/frontend/src/contexts/ContestContext.js"],"sourcesContent":["// src/contexts/ContestContext.js\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { languageOptions } from '../mock';\nimport { api } from '../utils/api';\n\nconst ContestContext = createContext();\n\nexport const useContest = () => {\n  const ctx = useContext(ContestContext);\n  if (!ctx) throw new Error('useContest must be used within ContestProvider');\n  return ctx;\n};\n\nexport const ContestProvider = ({ children }) => {\n  const [roundInfo, setRoundInfo] = useState({});\n  const [participants, setParticipants] = useState([]);\n  const [submissions, setSubmissions] = useState([]);\n\n  const getRoundInfo = (roundId) => roundInfo[roundId];\n\n  const updateRoundStatus = (roundId, status) => {\n    setRoundInfo(prev => ({ ...prev, [roundId]: { ...prev[roundId], status } }));\n  };\n\n  const startRound = (roundId) => {\n    setRoundInfo(prev => ({ ...prev, [roundId]: { ...prev[roundId], status: 'active', startTime: new Date().toISOString(), isLocked: false } }));\n  };\n\n  const lockRound = (roundId) => setRoundInfo(prev => ({ ...prev, [roundId]: { ...prev[roundId], isLocked: true } }));\n  const unlockRound = (roundId) => setRoundInfo(prev => ({ ...prev, [roundId]: { ...prev[roundId], isLocked: false } }));\n\n  const submitCode = async (userId, problemId, code, language, round) => {\n    try {\n      const payload = { userId, problemId, code, language, round };\n      const { data } = await api.submitCode(payload);\n      // update submissions\n      try {\n        const { data: subs } = await api.getUserSubmissions(userId);\n        setSubmissions(subs || []);\n      } catch (_) {}\n      return { success: true, submissionId: data?.submissionId || null };\n    } catch (err) {\n      console.error('submitCode error', err);\n      return { success: false, message: err.response?.data?.detail || err.message || 'Submission error' };\n    }\n  };\n\n  const runCode = async (code, language, customInput) => {\n    try {\n      const { data } = await api.runCode({ code, language, customInput });\n      const run = data?.run || {};\n      return { success: true, output: run.output || run.stdout || data?.output || '', executionTime: run.cpu_time || data?.executionTime || null };\n    } catch (err) {\n      console.error('runCode error', err);\n      throw err;\n    }\n  };\n\n  useEffect(() => {\n    async function bootstrap() {\n      const rounds = ['round1', 'round2'];\n      const next = {};\n      for (const id of rounds) {\n        try {\n          const { data } = await api.getRoundWindow(id);\n          next[id] = { ...(data || {}), id, name: id === 'round1' ? 'Round 1' : 'Round 2' };\n        } catch (err) {\n          next[id] = { id, name: id === 'round1' ? 'Round 1' : 'Round 2', status: 'upcoming', isLocked: true };\n        }\n      }\n\n      // load problems and attach to both rounds (backend may have round-specific queries later)\n      try {\n        const { data } = await api.getProblems();\n        const list = data?.problems || data || [];\n        next.round1 = { ...(next.round1 || {}), problems: list };\n        next.round2 = { ...(next.round2 || {}), problems: list };\n      } catch (err) {\n        console.warn('Failed to load problems during bootstrap', err);\n      }\n\n      setRoundInfo(next);\n    }\n\n    bootstrap();\n  }, []);\n\n  return (\n    <ContestContext.Provider value={{\n      roundInfo,\n      participants,\n      submissions,\n      getRoundInfo,\n      updateRoundStatus,\n      startRound,\n      lockRound,\n      unlockRound,\n      submitCode,\n      runCode,\n      toggleEligibility: () => {}\n    }}>\n      {children}\n    </ContestContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}