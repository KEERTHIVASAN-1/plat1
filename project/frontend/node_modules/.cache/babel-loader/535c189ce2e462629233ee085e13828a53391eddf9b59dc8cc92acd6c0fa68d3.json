{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Clock,AlertCircle}from'lucide-react';import{Alert,AlertDescription}from'./ui/alert';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Timer=_ref=>{let{startTime,duration,endTime,onTimeUp}=_ref;const[timeRemaining,setTimeRemaining]=useState(duration);const[isExpired,setIsExpired]=useState(false);useEffect(()=>{if(!startTime)return;const calculateTimeRemaining=()=>{const now=Date.now();let remaining=0;if(duration&&duration>0&&startTime){const start=new Date(startTime).getTime();const elapsed=Math.floor((now-start)/1000);remaining=duration-elapsed;}else if(endTime){const end=new Date(endTime).getTime();remaining=Math.floor((end-now)/1000);}if(remaining<=0){setTimeRemaining(0);setIsExpired(true);if(onTimeUp)onTimeUp();return 0;}setTimeRemaining(remaining);return remaining;};// Initial calculation\ncalculateTimeRemaining();// Update every second\nconst interval=setInterval(()=>{const remaining=calculateTimeRemaining();if(remaining<=0){clearInterval(interval);}},1000);return()=>clearInterval(interval);},[startTime,duration,endTime,onTimeUp]);const formatTime=seconds=>{const hours=Math.floor(seconds/3600);const minutes=Math.floor(seconds%3600/60);const secs=seconds%60;if(hours>0){return\"\".concat(hours,\":\").concat(String(minutes).padStart(2,'0'),\":\").concat(String(secs).padStart(2,'0'));}return\"\".concat(String(minutes).padStart(2,'0'),\":\").concat(String(secs).padStart(2,'0'));};const getTimeColor=()=>{if(timeRemaining===0)return'text-red-600';if(timeRemaining<300)return'text-orange-600';// Less than 5 minutes\nreturn'text-green-600';};if(!startTime&&!endTime){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-gray-500\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-lg\",children:\"--:--\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5 \".concat(getTimeColor())}),/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-lg font-semibold \".concat(getTimeColor()),children:formatTime(timeRemaining)}),isExpired&&/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-red-600 animate-pulse\"})]});};export default Timer;","map":{"version":3,"names":["React","useState","useEffect","Clock","AlertCircle","Alert","AlertDescription","jsx","_jsx","jsxs","_jsxs","Timer","_ref","startTime","duration","endTime","onTimeUp","timeRemaining","setTimeRemaining","isExpired","setIsExpired","calculateTimeRemaining","now","Date","remaining","start","getTime","elapsed","Math","floor","end","interval","setInterval","clearInterval","formatTime","seconds","hours","minutes","secs","concat","String","padStart","getTimeColor","className","children"],"sources":["D:/plat1/project/frontend/src/components/Timer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Clock, AlertCircle } from 'lucide-react';\nimport { Alert, AlertDescription } from './ui/alert';\n\nconst Timer = ({ startTime, duration, endTime, onTimeUp }) => {\n  const [timeRemaining, setTimeRemaining] = useState(duration);\n  const [isExpired, setIsExpired] = useState(false);\n\n  useEffect(() => {\n    if (!startTime) return;\n\n    const calculateTimeRemaining = () => {\n      const now = Date.now();\n      let remaining = 0;\n      if (duration && duration > 0 && startTime) {\n        const start = new Date(startTime).getTime();\n        const elapsed = Math.floor((now - start) / 1000);\n        remaining = duration - elapsed;\n      } else if (endTime) {\n        const end = new Date(endTime).getTime();\n        remaining = Math.floor((end - now) / 1000);\n      }\n\n      if (remaining <= 0) {\n        setTimeRemaining(0);\n        setIsExpired(true);\n        if (onTimeUp) onTimeUp();\n        return 0;\n      }\n\n      setTimeRemaining(remaining);\n      return remaining;\n    };\n\n    // Initial calculation\n    calculateTimeRemaining();\n\n    // Update every second\n    const interval = setInterval(() => {\n      const remaining = calculateTimeRemaining();\n      if (remaining <= 0) {\n        clearInterval(interval);\n      }\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [startTime, duration, endTime, onTimeUp]);\n\n  const formatTime = (seconds) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n\n    if (hours > 0) {\n      return `${hours}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\n    }\n    return `${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\n  };\n\n  const getTimeColor = () => {\n    if (timeRemaining === 0) return 'text-red-600';\n    if (timeRemaining < 300) return 'text-orange-600'; // Less than 5 minutes\n    return 'text-green-600';\n  };\n\n  if (!startTime && !endTime) {\n    return (\n      <div className=\"flex items-center space-x-2 text-gray-500\">\n        <Clock className=\"h-5 w-5\" />\n        <span className=\"font-mono text-lg\">--:--</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center space-x-2\">\n      <Clock className={`h-5 w-5 ${getTimeColor()}`} />\n      <span className={`font-mono text-lg font-semibold ${getTimeColor()}`}>\n        {formatTime(timeRemaining)}\n      </span>\n      {isExpired && (\n        <AlertCircle className=\"h-5 w-5 text-red-600 animate-pulse\" />\n      )}\n    </div>\n  );\n};\n\nexport default Timer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}