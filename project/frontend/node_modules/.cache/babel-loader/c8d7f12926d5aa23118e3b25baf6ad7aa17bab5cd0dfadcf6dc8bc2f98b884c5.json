{"ast":null,"code":"var _jsxFileName = \"D:\\\\plat1\\\\project\\\\frontend\\\\src\\\\contexts\\\\ContestContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/contexts/ContestContext.js\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { api } from \"../utils/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ContestContext = /*#__PURE__*/createContext();\nexport const useContest = () => {\n  _s();\n  return useContext(ContestContext);\n};\n_s(useContest, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ContestProvider = ({\n  children\n}) => {\n  _s2();\n  const [roundInfo, setRoundInfo] = useState({});\n  const [participants] = useState([]);\n  const [submissions, setSubmissions] = useState([]);\n  const getRoundInfo = roundId => roundInfo[roundId];\n  const updateRoundStatus = (roundId, status) => {\n    setRoundInfo(prev => ({\n      ...prev,\n      [roundId]: {\n        ...prev[roundId],\n        status\n      }\n    }));\n  };\n  const startRound = roundId => {\n    setRoundInfo(prev => ({\n      ...prev,\n      [roundId]: {\n        ...prev[roundId],\n        status: \"active\",\n        startTime: new Date().toISOString(),\n        isLocked: false\n      }\n    }));\n  };\n  const lockRound = roundId => setRoundInfo(prev => ({\n    ...prev,\n    [roundId]: {\n      ...prev[roundId],\n      isLocked: true\n    }\n  }));\n  const unlockRound = roundId => setRoundInfo(prev => ({\n    ...prev,\n    [roundId]: {\n      ...prev[roundId],\n      isLocked: false\n    }\n  }));\n\n  // ===============================\n  // ðŸ”¥ RUN CODE FIXED\n  // ===============================\n  const runCode = async (code, language, customInput) => {\n    try {\n      const payload = {\n        code,\n        language,\n        customInput\n      };\n      const {\n        data\n      } = await api.runCode(payload);\n      if (!(data !== null && data !== void 0 && data.success)) {\n        return {\n          success: false,\n          output: (data === null || data === void 0 ? void 0 : data.error) || \"Run failed\"\n        };\n      }\n      const run = data.run || {};\n      return {\n        success: true,\n        output: run.output || \"\",\n        executionTime: run.cpu_time || 0\n      };\n    } catch (err) {\n      console.error(\"runCode error:\", err);\n      return {\n        success: false,\n        output: \"Run error: \" + (err.message || err)\n      };\n    }\n  };\n\n  // ===============================\n  // ðŸ”¥ SUBMIT CODE FIXED\n  // ===============================\n  const submitCode = async (userId, problemId, code, language, roundId) => {\n    try {\n      const payload = {\n        userId,\n        problemId,\n        code,\n        language,\n        round: roundId\n      };\n      const {\n        data\n      } = await api.submitCode(payload);\n      if (!(data !== null && data !== void 0 && data.success)) {\n        return {\n          success: false,\n          message: (data === null || data === void 0 ? void 0 : data.message) || \"Submission failed\"\n        };\n      }\n\n      // refresh submissions\n      const {\n        data: subs\n      } = await api.getUserSubmissions(userId);\n      setSubmissions(subs || []);\n      return {\n        success: true,\n        submission: data === null || data === void 0 ? void 0 : data.result\n      };\n    } catch (err) {\n      console.error(\"submitCode error:\", err);\n      return {\n        success: false,\n        message: err.message || \"Submission error\"\n      };\n    }\n  };\n\n  // ===============================\n  // ðŸ”¥ LOAD ROUND INFO + PROBLEMS\n  // ===============================\n  useEffect(() => {\n    async function bootstrap() {\n      const rounds = [\"round1\", \"round2\"];\n      const next = {};\n      for (const id of rounds) {\n        try {\n          const {\n            data\n          } = await api.getRoundWindow(id);\n          next[id] = {\n            ...(data || {}),\n            id,\n            name: id === \"round1\" ? \"Round 1\" : \"Round 2\"\n          };\n        } catch (_) {\n          next[id] = {\n            id,\n            name: id === \"round1\" ? \"Round 1\" : \"Round 2\",\n            status: \"upcoming\",\n            isLocked: true\n          };\n        }\n      }\n      try {\n        const {\n          data\n        } = await api.getProblems();\n        const list = (data === null || data === void 0 ? void 0 : data.problems) || data || [];\n        next.round1 = {\n          ...(next.round1 || {}),\n          problems: list\n        };\n        next.round2 = {\n          ...(next.round2 || {}),\n          problems: list\n        };\n      } catch (err) {\n        console.warn(\"Problem load failed:\", err);\n      }\n      setRoundInfo(next);\n    }\n    bootstrap();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ContestContext.Provider, {\n    value: {\n      roundInfo,\n      participants,\n      submissions,\n      getRoundInfo,\n      updateRoundStatus,\n      startRound,\n      lockRound,\n      unlockRound,\n      runCode,\n      submitCode\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n};\n_s2(ContestProvider, \"FWexCCrZsM2r/8wuEf0CIrkZX3Q=\");\n_c = ContestProvider;\nvar _c;\n$RefreshReg$(_c, \"ContestProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","api","jsxDEV","_jsxDEV","ContestContext","useContest","_s","ContestProvider","children","_s2","roundInfo","setRoundInfo","participants","submissions","setSubmissions","getRoundInfo","roundId","updateRoundStatus","status","prev","startRound","startTime","Date","toISOString","isLocked","lockRound","unlockRound","runCode","code","language","customInput","payload","data","success","output","error","run","executionTime","cpu_time","err","console","message","submitCode","userId","problemId","round","subs","getUserSubmissions","submission","result","bootstrap","rounds","next","id","getRoundWindow","name","_","getProblems","list","problems","round1","round2","warn","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/plat1/project/frontend/src/contexts/ContestContext.js"],"sourcesContent":["// src/contexts/ContestContext.js\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { api } from \"../utils/api\";\n\nconst ContestContext = createContext();\nexport const useContest = () => useContext(ContestContext);\n\nexport const ContestProvider = ({ children }) => {\n  const [roundInfo, setRoundInfo] = useState({});\n  const [participants] = useState([]);\n  const [submissions, setSubmissions] = useState([]);\n\n  const getRoundInfo = (roundId) => roundInfo[roundId];\n\n  const updateRoundStatus = (roundId, status) => {\n    setRoundInfo((prev) => ({\n      ...prev,\n      [roundId]: { ...prev[roundId], status },\n    }));\n  };\n\n  const startRound = (roundId) => {\n    setRoundInfo((prev) => ({\n      ...prev,\n      [roundId]: {\n        ...prev[roundId],\n        status: \"active\",\n        startTime: new Date().toISOString(),\n        isLocked: false,\n      },\n    }));\n  };\n\n  const lockRound = (roundId) =>\n    setRoundInfo((prev) => ({\n      ...prev,\n      [roundId]: { ...prev[roundId], isLocked: true },\n    }));\n\n  const unlockRound = (roundId) =>\n    setRoundInfo((prev) => ({\n      ...prev,\n      [roundId]: { ...prev[roundId], isLocked: false },\n    }));\n\n  // ===============================\n  // ðŸ”¥ RUN CODE FIXED\n  // ===============================\n  const runCode = async (code, language, customInput) => {\n    try {\n      const payload = { code, language, customInput };\n      const { data } = await api.runCode(payload);\n\n      if (!data?.success) {\n        return {\n          success: false,\n          output: data?.error || \"Run failed\",\n        };\n      }\n\n      const run = data.run || {};\n\n      return {\n        success: true,\n        output: run.output || \"\",\n        executionTime: run.cpu_time || 0,\n      };\n    } catch (err) {\n      console.error(\"runCode error:\", err);\n      return {\n        success: false,\n        output: \"Run error: \" + (err.message || err),\n      };\n    }\n  };\n\n  // ===============================\n  // ðŸ”¥ SUBMIT CODE FIXED\n  // ===============================\n  const submitCode = async (userId, problemId, code, language, roundId) => {\n    try {\n      const payload = { userId, problemId, code, language, round: roundId };\n      const { data } = await api.submitCode(payload);\n\n      if (!data?.success) {\n        return {\n          success: false,\n          message: data?.message || \"Submission failed\",\n        };\n      }\n\n      // refresh submissions\n      const { data: subs } = await api.getUserSubmissions(userId);\n      setSubmissions(subs || []);\n\n      return { success: true, submission: data?.result };\n    } catch (err) {\n      console.error(\"submitCode error:\", err);\n      return {\n        success: false,\n        message: err.message || \"Submission error\",\n      };\n    }\n  };\n\n  // ===============================\n  // ðŸ”¥ LOAD ROUND INFO + PROBLEMS\n  // ===============================\n  useEffect(() => {\n    async function bootstrap() {\n      const rounds = [\"round1\", \"round2\"];\n      const next = {};\n\n      for (const id of rounds) {\n        try {\n          const { data } = await api.getRoundWindow(id);\n          next[id] = {\n            ...(data || {}),\n            id,\n            name: id === \"round1\" ? \"Round 1\" : \"Round 2\",\n          };\n        } catch (_) {\n          next[id] = {\n            id,\n            name: id === \"round1\" ? \"Round 1\" : \"Round 2\",\n            status: \"upcoming\",\n            isLocked: true,\n          };\n        }\n      }\n\n      try {\n        const { data } = await api.getProblems();\n        const list = data?.problems || data || [];\n\n        next.round1 = { ...(next.round1 || {}), problems: list };\n        next.round2 = { ...(next.round2 || {}), problems: list };\n      } catch (err) {\n        console.warn(\"Problem load failed:\", err);\n      }\n\n      setRoundInfo(next);\n    }\n\n    bootstrap();\n  }, []);\n\n  return (\n    <ContestContext.Provider\n      value={{\n        roundInfo,\n        participants,\n        submissions,\n        getRoundInfo,\n        updateRoundStatus,\n        startRound,\n        lockRound,\n        unlockRound,\n        runCode,\n        submitCode,\n      }}\n    >\n      {children}\n    </ContestContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}