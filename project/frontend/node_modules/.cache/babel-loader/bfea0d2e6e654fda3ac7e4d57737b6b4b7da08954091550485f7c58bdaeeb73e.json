{"ast":null,"code":"// src/utils/api.js\nimport axios from 'axios';\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || process.env.REACT_APP_API_URL || \"http://127.0.0.1:8000\";\nconst apiClient = axios.create({\n  baseURL: BACKEND_URL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  },\n  timeout: 20000\n});\n\n// Add token to requests\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\") || localStorage.getItem(\"access_token\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Handle 401 automatically\napiClient.interceptors.response.use(res => res, error => {\n  var _error$response;\n  if ((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    window.location.href = \"/login\";\n  }\n  return Promise.reject(error);\n});\nexport const api = {\n  login: (email, password) => apiClient.post(\"/auth/login\", {\n    email,\n    password\n  }),\n  register: (name, email, password) => apiClient.post(\"/auth/register\", {\n    name,\n    email,\n    password\n  }),\n  // contest\n  getRoundWindow: roundId => apiClient.get(\"/timer/window\", {\n    params: {\n      roundId\n    }\n  }),\n  getProblems: () => apiClient.get(\"/problems\"),\n  getProblem: id => apiClient.get(`/problems/${id}`),\n  runCode: data => apiClient.post(\"/run\", data),\n  submitCode: data => apiClient.post(\"/submit\", data),\n  getUserSubmissions: userId => apiClient.get(`/submissions/${userId}`),\n  // admin\n  getParticipants: () => apiClient.get(\"/admin/participants\"),\n  addProblem: data => apiClient.post(\"/admin/problem\", data),\n  updateProblem: (id, data) => apiClient.put(`/admin/problem/${id}`, data),\n  deleteProblem: id => apiClient.delete(`/admin/problem/${id}`)\n};\nexport default apiClient;","map":{"version":3,"names":["axios","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","REACT_APP_API_URL","apiClient","create","baseURL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","res","error","_error$response","status","removeItem","window","location","href","Promise","reject","api","login","email","password","post","register","name","getRoundWindow","roundId","get","params","getProblems","getProblem","id","runCode","data","submitCode","getUserSubmissions","userId","getParticipants","addProblem","updateProblem","put","deleteProblem","delete"],"sources":["D:/plat1/project/frontend/src/utils/api.js"],"sourcesContent":["// src/utils/api.js\nimport axios from 'axios';\n\nconst BACKEND_URL =\n  process.env.REACT_APP_BACKEND_URL ||\n  process.env.REACT_APP_API_URL ||\n  \"http://127.0.0.1:8000\";\n\nconst apiClient = axios.create({\n  baseURL: BACKEND_URL,\n  headers: { \"Content-Type\": \"application/json\" },\n  timeout: 20000,\n});\n\n// Add token to requests\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"token\") || localStorage.getItem(\"access_token\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Handle 401 automatically\napiClient.interceptors.response.use(\n  (res) => res,\n  (error) => {\n    if (error?.response?.status === 401) {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const api = {\n  login: (email, password) => apiClient.post(\"/auth/login\", { email, password }),\n  register: (name, email, password) => apiClient.post(\"/auth/register\", { name, email, password }),\n\n  // contest\n  getRoundWindow: (roundId) => apiClient.get(\"/timer/window\", { params: { roundId } }),\n  getProblems: () => apiClient.get(\"/problems\"),\n  getProblem: (id) => apiClient.get(`/problems/${id}`),\n\n  runCode: (data) => apiClient.post(\"/run\", data),\n  submitCode: (data) => apiClient.post(\"/submit\", data),\n\n  getUserSubmissions: (userId) => apiClient.get(`/submissions/${userId}`),\n\n  // admin\n  getParticipants: () => apiClient.get(\"/admin/participants\"),\n  addProblem: (data) => apiClient.post(\"/admin/problem\", data),\n  updateProblem: (id, data) => apiClient.put(`/admin/problem/${id}`, data),\n  deleteProblem: (id) => apiClient.delete(`/admin/problem/${id}`),\n};\n\nexport default apiClient;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}