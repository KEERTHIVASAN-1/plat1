{"ast":null,"code":"import axios from 'axios';\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst apiClient = axios.create({\n  baseURL: BACKEND_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    // Redirect to login on unauthorized\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const api = {\n  // Auth endpoints\n  login: (email, password) => apiClient.post('/auth/login', {\n    email,\n    password\n  }),\n  register: (name, email, password) => apiClient.post('/auth/register', {\n    name,\n    email,\n    password\n  }),\n  // Contest endpoints (backend-driven)\n  getRoundWindow: roundId => apiClient.get(`/timer/window`, {\n    params: {\n      roundId\n    }\n  }),\n  getProblems: () => apiClient.get('/problems'),\n  getProblem: problemId => apiClient.get(`/problems/${problemId}`),\n  submitCode: data => apiClient.post('/submit', data),\n  runCode: data => apiClient.post('/run', data),\n  getUserSubmissions: userId => apiClient.get(`/submissions/${userId}`),\n  // Admin endpoints (if implemented)\n  getParticipants: () => apiClient.get('/admin/participants'),\n  getParticipant: id => apiClient.get(`/admin/participant/${id}`),\n  toggleEligibility: id => apiClient.patch(`/admin/participant/${id}/eligibility`),\n  updateRoundStatus: (roundId, status) => apiClient.patch(`/admin/round/${roundId}/status`, {\n    status\n  }),\n  lockRound: roundId => apiClient.patch(`/admin/round/${roundId}/lock`),\n  unlockRound: roundId => apiClient.patch(`/admin/round/${roundId}/unlock`),\n  addProblem: data => apiClient.post('/admin/problem', data),\n  updateProblem: (id, data) => apiClient.put(`/admin/problem/${id}`, data),\n  deleteProblem: id => apiClient.delete(`/admin/problem/${id}`)\n};\nexport default apiClient;","map":{"version":3,"names":["axios","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","api","login","email","password","post","register","name","getRoundWindow","roundId","get","params","getProblems","getProblem","problemId","submitCode","data","runCode","getUserSubmissions","userId","getParticipants","getParticipant","id","toggleEligibility","patch","updateRoundStatus","lockRound","unlockRound","addProblem","updateProblem","put","deleteProblem","delete"],"sources":["D:/plat1/project/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n\nconst apiClient = axios.create({\n  baseURL: BACKEND_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Redirect to login on unauthorized\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const api = {\n  // Auth endpoints\n  login: (email, password) => apiClient.post('/auth/login', { email, password }),\n  register: (name, email, password) => apiClient.post('/auth/register', { name, email, password }),\n\n  // Contest endpoints (backend-driven)\n  getRoundWindow: (roundId) => apiClient.get(`/timer/window`, { params: { roundId } }),\n  getProblems: () => apiClient.get('/problems'),\n  getProblem: (problemId) => apiClient.get(`/problems/${problemId}`),\n  submitCode: (data) => apiClient.post('/submit', data),\n  runCode: (data) => apiClient.post('/run', data),\n  getUserSubmissions: (userId) => apiClient.get(`/submissions/${userId}`),\n\n  // Admin endpoints (if implemented)\n  getParticipants: () => apiClient.get('/admin/participants'),\n  getParticipant: (id) => apiClient.get(`/admin/participant/${id}`),\n  toggleEligibility: (id) => apiClient.patch(`/admin/participant/${id}/eligibility`),\n  updateRoundStatus: (roundId, status) => apiClient.patch(`/admin/round/${roundId}/status`, { status }),\n  lockRound: (roundId) => apiClient.patch(`/admin/round/${roundId}/lock`),\n  unlockRound: (roundId) => apiClient.patch(`/admin/round/${roundId}/unlock`),\n  addProblem: (data) => apiClient.post('/admin/problem', data),\n  updateProblem: (id, data) => apiClient.put(`/admin/problem/${id}`, data),\n  deleteProblem: (id) => apiClient.delete(`/admin/problem/${id}`),\n};\n\nexport default apiClient;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}