{"ast":null,"code":"// src/utils/api.js\nimport axios from'axios';const BACKEND_URL=process.env.REACT_APP_BACKEND_URL||process.env.REACT_APP_API_URL||\"http://127.0.0.1:8000\";const apiClient=axios.create({baseURL:BACKEND_URL,headers:{\"Content-Type\":\"application/json\"},timeout:20000});// Add token to requests\napiClient.interceptors.request.use(config=>{const token=localStorage.getItem(\"token\")||localStorage.getItem(\"access_token\");if(token)config.headers.Authorization=\"Bearer \".concat(token);return config;});// Handle 401 automatically\napiClient.interceptors.response.use(res=>res,error=>{var _error$response;if((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");window.location.href=\"/login\";}return Promise.reject(error);});export const api={login:(email,password)=>apiClient.post(\"/auth/login\",{email,password}),register:(name,email,password)=>apiClient.post(\"/auth/register\",{name,email,password}),// contest\ngetRoundWindow:roundId=>apiClient.get(\"/timer/window\",{params:{roundId}}),getProblems:()=>apiClient.get(\"/problems\"),getProblem:id=>apiClient.get(\"/problems/\".concat(id)),runCode:data=>apiClient.post(\"/run\",data),submitCode:data=>apiClient.post(\"/submit\",data),getUserSubmissions:userId=>apiClient.get(\"/submissions/\".concat(userId)),// admin\ngetParticipants:()=>apiClient.get(\"/admin/participants\"),addProblem:data=>apiClient.post(\"/admin/problem\",data),updateProblem:(id,data)=>apiClient.put(\"/admin/problem/\".concat(id),data),deleteProblem:id=>apiClient.delete(\"/admin/problem/\".concat(id))};export default apiClient;","map":{"version":3,"names":["axios","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","REACT_APP_API_URL","apiClient","create","baseURL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","response","res","error","_error$response","status","removeItem","window","location","href","Promise","reject","api","login","email","password","post","register","name","getRoundWindow","roundId","get","params","getProblems","getProblem","id","runCode","data","submitCode","getUserSubmissions","userId","getParticipants","addProblem","updateProblem","put","deleteProblem","delete"],"sources":["D:/plat1/project/frontend/src/utils/api.js"],"sourcesContent":["// src/utils/api.js\nimport axios from 'axios';\n\nconst BACKEND_URL =\n  process.env.REACT_APP_BACKEND_URL ||\n  process.env.REACT_APP_API_URL ||\n  \"http://127.0.0.1:8000\";\n\nconst apiClient = axios.create({\n  baseURL: BACKEND_URL,\n  headers: { \"Content-Type\": \"application/json\" },\n  timeout: 20000,\n});\n\n// Add token to requests\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"token\") || localStorage.getItem(\"access_token\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Handle 401 automatically\napiClient.interceptors.response.use(\n  (res) => res,\n  (error) => {\n    if (error?.response?.status === 401) {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const api = {\n  login: (email, password) => apiClient.post(\"/auth/login\", { email, password }),\n  register: (name, email, password) => apiClient.post(\"/auth/register\", { name, email, password }),\n\n  // contest\n  getRoundWindow: (roundId) => apiClient.get(\"/timer/window\", { params: { roundId } }),\n  getProblems: () => apiClient.get(\"/problems\"),\n  getProblem: (id) => apiClient.get(`/problems/${id}`),\n\n  runCode: (data) => apiClient.post(\"/run\", data),\n  submitCode: (data) => apiClient.post(\"/submit\", data),\n\n  getUserSubmissions: (userId) => apiClient.get(`/submissions/${userId}`),\n\n  // admin\n  getParticipants: () => apiClient.get(\"/admin/participants\"),\n  addProblem: (data) => apiClient.post(\"/admin/problem\", data),\n  updateProblem: (id, data) => apiClient.put(`/admin/problem/${id}`, data),\n  deleteProblem: (id) => apiClient.delete(`/admin/problem/${id}`),\n};\n\nexport default apiClient;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}